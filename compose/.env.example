# If you do not have a domain yet, you can still run locally.
# When domain exists, set DOMAIN and switch compose/Caddyfile -> Caddyfile.domain.

DOMAIN=lms.example.org

POSTGRES_DB=classhub
POSTGRES_USER=classhub
POSTGRES_PASSWORD=REPLACE_ME_STRONG

MINIO_ROOT_USER=minio_admin
MINIO_ROOT_PASSWORD=REPLACE_ME_STRONG

DJANGO_DEBUG=0
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1
DJANGO_SECRET_KEY=REPLACE_ME_STRONG
CSRF_TRUSTED_ORIGINS=http://localhost
REQUEST_SAFETY_TRUST_PROXY_HEADERS=1
REQUEST_SAFETY_XFF_INDEX=0
CLASSHUB_UPLOAD_MAX_MB=600
CLASSHUB_JOIN_RATE_LIMIT_PER_MINUTE=20
CLASSHUB_DEVICE_REJOIN_COOKIE_NAME=classhub_student_hint
CLASSHUB_DEVICE_REJOIN_MAX_AGE_DAYS=30
CLASSHUB_SUBMISSION_RETENTION_DAYS=0
CLASSHUB_STUDENT_EVENT_RETENTION_DAYS=0

# Homework Helper backend
# Options: "ollama" (default) or "openai"
HELPER_LLM_BACKEND=ollama
HELPER_STRICTNESS=light
HELPER_SCOPE_MODE=strict
HELPER_REFERENCE_DIR=/app/tutor/reference
HELPER_REFERENCE_MAP={"piper_scratch":"piper_scratch.md"}
HELPER_REFERENCE_FILE=/app/tutor/reference/piper_scratch.md
HELPER_MAX_CONCURRENCY=2
HELPER_QUEUE_MAX_WAIT_SECONDS=10
HELPER_QUEUE_POLL_SECONDS=0.2
HELPER_QUEUE_SLOT_TTL_SECONDS=120
HELPER_BACKEND_MAX_ATTEMPTS=2
HELPER_BACKOFF_SECONDS=0.4
HELPER_CIRCUIT_BREAKER_FAILURES=5
HELPER_CIRCUIT_BREAKER_TTL_SECONDS=30
HELPER_RATE_LIMIT_PER_MINUTE=30
HELPER_RATE_LIMIT_PER_IP_PER_MINUTE=90
HELPER_TOPIC_FILTER_MODE=strict
HELPER_TEXT_LANGUAGE_KEYWORDS=pascal,python,java,javascript,typescript,c++,c#,csharp,ruby,php,go,golang,rust,swift,kotlin

# Ollama (local model server)
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=llama3.2:1b
OLLAMA_TIMEOUT_SECONDS=30
OLLAMA_TEMPERATURE=0.2
OLLAMA_TOP_P=0.9

# OpenAI (optional fallback)
OPENAI_API_KEY=__SET_ME__
OPENAI_MODEL=gpt-5.2

# Deploy smoke checks (used by scripts/smoke_check.sh --strict)
SMOKE_BASE_URL=https://lms.example.org
SMOKE_CLASS_CODE=ABCD1234
SMOKE_DISPLAY_NAME=Smoke Student
SMOKE_TEACHER_USERNAME=teacher1
SMOKE_TEACHER_PASSWORD=CHANGE_ME
SMOKE_TIMEOUT_SECONDS=20
SMOKE_INSECURE_TLS=0
